<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Room</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>
    <body>
        <body>
            <h1 class="text-center">Chat with your friends</h1>
            <div class="container-fluid">
                <div class="row">
                    <!-- ALL CHAT USERS -->
                    <div class="col-4 border-right vh-100" id="allUsersDiv">
    
                    </div>
                     <!-- Chat Page -->
                    <div class="col-8"> 
    
                    </div>
                </div>
            </div>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
            import { getAuth, onAuthStateChanged ,signOut, } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
            import { getDatabase,ref,set,onValue} from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries
            
            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyCjXbrwl3yma9mhoUPyWzIEdK_1enQWXpY",
                authDomain: "fir-class-zoom.firebaseapp.com",
                databaseURL: "https://fir-class-zoom-default-rtdb.firebaseio.com",
                projectId: "fir-class-zoom",
                storageBucket: "fir-class-zoom.appspot.com",
                messagingSenderId: "37334511293",
                appId: "1:37334511293:web:7e7ef7d16274e18b2d51d4"
              };
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth();
            const database = getDatabase();
            let allChatsRef = ref(database,"allUsers")
            onValue(allChatsRef,(snapshot)=>{
                let data = snapshot.val()
                console.log(data)
                allUsersDiv.innerHTML = ""
                data.map((eachUser)=>{
                    allUsersDiv.innerHTML += `
                    <h1 id='chatHeader' onclick="startChat('${eachUser.id}')">${eachUser.displayName}</h1>
                    <hr/>
                    `
                })
            })
        console.log(window)
    </script>
</body>
</html>